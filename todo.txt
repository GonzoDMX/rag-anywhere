These are items that we need TODO

- Add more loaders and splitters to improve and expand file compatibility
- Come up with a clever way to manage embedding model parameters this includes both how the user inputs parameters for an embedding model (or how we might auto-retrieve the params from a service, maybe a registry of common models) also we need a way for the splitters to auto-adapt to different context sizes. This will ensure we are always getting optimum performance with minimum configuration.
- Add auto metadata generator using GLiNER to keep memory requirements manageable for local deployment

Generic Entity Type List for GLiNER:
["person", "organization", "location", "software", "technology", "programming_language", "process", "event", "product", "metric", "date", "concept", "category", "issue", "solution"]

Label,Category,Why it's useful for RAG
person,Actor,Identifying key stakeholders or authors.
organization,Actor,"Companies, institutions, or groups mentioned."
location,Entity,Physical places (useful for spatial queries).
software,Tech,"Tools, platforms, or libraries (critical for your user base)."
technology,Tech,"Broader concepts like ""AI"", ""SQL"", ""Cloud Computing""."
programming_language,Tech,"Specifically for code-heavy docs (Python, Java, etc.)."
process,Action,"Methodologies or workflows (e.g., ""Agile"", ""Manufacturing"")."
event,Action,"Meetings, incidents, releases, or historical moments."
product,Object,Specific items or deliverables being discussed.
metric,Data,"Quantitative measures (e.g., ""latency"", ""revenue"", ""accuracy"")."
date,Time,Timestamps or eras (crucial for timeline reconstruction).
concept,Abstract,High-level ideas that don't fit other categories.
category,Abstract,Classification tags explicitly mentioned in text.
issue,Risk,"Problems, bugs, or risks (e.g., ""memory leak"", ""inflation"")."
solution,Outcome,"Fixes, patches, or resolutions described in text."

- Add knowledge graph functionality using an entity relation many-to-many table

-- ==========================================
-- 1. DOCUMENT STORAGE (The "Physical" Layer)
-- ==========================================

CREATE TABLE documents (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    filename TEXT NOT NULL,
    filepath TEXT UNIQUE,   -- Prevents duplicate file imports
    checksum TEXT,          -- For detecting file changes
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE chunks (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    doc_id INTEGER NOT NULL,
    chunk_index INTEGER NOT NULL,  -- Order of the chunk in the doc
    content TEXT NOT NULL,         -- The raw text used for embedding
    token_count INTEGER,           -- Useful for managing context windows later
    FOREIGN KEY(doc_id) REFERENCES documents(id) ON DELETE CASCADE
);

-- Index for fast retrieval of full documents
CREATE INDEX idx_chunks_doc ON chunks(doc_id);

-- ==========================================
-- 2. SEARCH LAYER (The "Lexical" Layer)
-- ==========================================

-- FTS5 Virtual Table for BM25/Keyword Search
-- We content=chunks to save space (external content table)
-- Note: You need to manage the triggers to keep this in sync
CREATE VIRTUAL TABLE chunks_fts USING fts5(
    content,
    content='chunks',
    content_rowid='id'
);

-- Triggers to keep FTS5 in sync with Chunks automatically
CREATE TRIGGER chunks_ai AFTER INSERT ON chunks BEGIN
  INSERT INTO chunks_fts(rowid, content) VALUES (new.id, new.content);
END;
CREATE TRIGGER chunks_ad AFTER DELETE ON chunks BEGIN
  INSERT INTO chunks_fts(chunks_fts, rowid, content) VALUES('delete', old.id, old.content);
END;
CREATE TRIGGER chunks_au AFTER UPDATE ON chunks BEGIN
  INSERT INTO chunks_fts(chunks_fts, rowid, content) VALUES('delete', old.id, old.content);
  INSERT INTO chunks_fts(rowid, content) VALUES (new.id, new.content);
END;

-- ==========================================
-- 3. KNOWLEDGE GRAPH LAYER (The "Semantic" Layer)
-- ==========================================

CREATE TABLE graph_nodes (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,          -- Normalized (lowercase, stripped)
    display_name TEXT NOT NULL,  -- Original formatting (e.g., "SpaceX")
    category TEXT NOT NULL,      -- e.g., "organization", "person", "concept"
    
    -- Metadata for pruning/ranking
    frequency INTEGER DEFAULT 1, 
    is_public BOOLEAN DEFAULT 1, -- 1=Generic/GLiNER, 0=Hidden/Internal
    
    UNIQUE(name, category)       -- Prevents "Apple"(Org) and "Apple"(Org) duplicates
);

CREATE TABLE chunk_edges (
    chunk_id INTEGER NOT NULL,
    node_id INTEGER NOT NULL,
    
    weight REAL DEFAULT 1.0,     -- Confidence score (GLiNER score or 1.0 for keywords)
    source TEXT DEFAULT 'gliner', -- 'gliner', 'keybert', 'user'
    
    PRIMARY KEY (chunk_id, node_id), -- Composite Key: Instant lookup, prevents duplicate edges
    FOREIGN KEY(chunk_id) REFERENCES chunks(id) ON DELETE CASCADE,
    FOREIGN KEY(node_id) REFERENCES graph_nodes(id) ON DELETE CASCADE
);

-- Critical Indices for Graph Traversal Speed
CREATE INDEX idx_edges_node ON chunk_edges(node_id); -- Find all chunks for a node
CREATE INDEX idx_nodes_cat ON graph_nodes(category); -- Filter by "Show me all Persons"

- Add CLI management commands for cached local models
- Improve and automate server management